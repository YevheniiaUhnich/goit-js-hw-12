{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// const baseUrl = \"https://pixabay.com/api\";\n// const endPoint = \"/api\";\n\nexport default async function searchImages(searchWord, page = 1, per_page = 40) {\n  const options = {\n    params: {\n      key: '48866244-bc210103fc5496976cb537971',\n      q: searchWord,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n\n//   const url = baseUrl + endPoint + `?key=${options.params.key}&q=${options.params.q}&image_type=${options.params.image_type}&orientation=${options.params.orientation}&safesearch=${options.params.safesearch}`;\n  const url = `https://pixabay.com/api/?key=${options.params.key}&q=${options.params.q}&image_type=${options.params.image_type}&orientation=${options.params.orientation}&safesearch=${options.params.safesearch}&page=${page}&per_page=${per_page}`;\n\n  return axios.get(url);\n}\n\n\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport async function  imagesTemplate(arrPict, tagGallery) {\n    const gallery = document.querySelector(tagGallery);\n    gallery.innerHTML = '';\n  \n    await new Promise(resolve => setTimeout(resolve, 0));\n\n    const markup = arrPict.map((image) =>\n      `<li class=\"gallery-item\">\n        <a class='gallery-link' href=\"${image.largeImageURL}\">\n          <img class=\"li-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          <div class=\"li-text\">\n            <table class=\"table\">\n              <tr><td>Likes</td><td>Views</td><td>Comment</td><td>Downloads</td></tr>\n              <tr><td>${image.likes}</td><td>${image.views}</td><td>${image.comments}</td><td>${image.downloads}</td></tr>\n            </table>\n          </div>\n        </a>\n      </li>`\n    ).join(\"\");\n  \n    gallery.insertAdjacentHTML(\"afterbegin\", markup);\n  \n    const lightbox = new SimpleLightbox(tagGallery + \" a\", {\n      captionsData: 'alt',\n      captionDelay: 250,\n      close: true,\n    });\n\n    await new Promise(resolve => setTimeout(resolve, 0));\n\n    lightbox.refresh();\n\n    gallery.addEventListener('click', (e) => {\n        if (e.target.tagName === 'IMG') {\n          lightbox.close(); \n        }\n      });\n  }\n  \n\n\n\n\n","import searchImages from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-function';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst gallery = document.querySelector(\".gallery\");\nconst waitMessage = document.querySelector(\".wait-msg\");\nconst loadingMessage = document.querySelector(\"#loading-message\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\n\nlet searchWord = \"\";\nlet page = 1;\nconst per_page = 40;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async function (e) {\n  e.preventDefault();\n\n  searchWord = input.value.trim();\n\n  if (!searchWord) {\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: `rgba(255, 255, 255, 1)`,\n      close: `true`,\n      position: \"topRight\",\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Input search string'\n    });\n    return;\n  }\n\n  gallery.innerHTML = ''; \n  page = 1; \n  loadMoreBtn.style.display = 'none'; \n\n  await fetchImages();\n});\n\n  async function fetchImages() {\n    loadingMessage.style.display = 'block';\n\n    try {\n        const response = await searchImages(searchWord, page, per_page);\n        loadingMessage.style.display = 'none';  \n\n        if (response.data.hits.length === 0) {\n         iziToast.show({\n          backgroundColor: 'rgba(239, 64, 64, 1)',\n          messageColor: `rgba(255, 255, 255, 1)`,\n          close: `true`,\n          position: \"topRight\",\n          title: 'Error',\n          titleColor: '#fff',\n          titleSize: '16px',\n          message: 'Sorry, there are no images matching your search query. Please try again'\n        });\n        return;  \n      }\n\n        totalHits = response.data.totalHits;\n        console.log(`Total images available: ${totalHits}`);\n        console.log(`Images received: ${response.data.hits.length}`);\n        imagesTemplate(response.data.hits, '.gallery');\n\n    page += 1;\n\n        if (page * per_page >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            if (page > 1) { \n            iziToast.show({\n                backgroundColor: 'rgba(239, 64, 64, 1)',\n                messageColor: 'rgba(255, 255, 255, 1)',\n                close: true,\n                position: 'topRight',\n                title: 'Info',\n                titleColor: '#fff',\n                titleSize: '16px',\n                message: \"We're sorry, but you've reached the end of search results.\",\n              });\n            }\n            } else {\n              loadMoreBtn.style.display = 'block';\n            }\n\n            smoothScroll();\n            \n        } catch (error) {\n          loadingMessage.style.display = 'none';\n          console.error(error);\n          iziToast.show({\n            backgroundColor: 'rgba(239, 64, 64, 1)',\n            messageColor: 'rgba(255, 255, 255, 1)',\n            close: true,\n            position: 'topRight',\n            title: 'Error',\n            titleColor: '#fff',\n            titleSize: '16px',\n            message: 'Sorry, there was an error fetching images. Please try again.',\n        });\n    }\n}\n\nloadMoreBtn.addEventListener('click', async function () {\n    await fetchImages();\n  });\n  \n  function smoothScroll() {\n    const galleryItem = document.querySelector('.gallery img');\n    if (galleryItem) {\n      const cardHeight = galleryItem.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n"],"names":["searchImages","searchWord","page","per_page","options","url","axios","imagesTemplate","arrPict","tagGallery","gallery","resolve","markup","image","lightbox","SimpleLightbox","form","input","loadingMessage","loadMoreBtn","totalHits","e","iziToast","fetchImages","response","smoothScroll","error","galleryItem","cardHeight"],"mappings":"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"}