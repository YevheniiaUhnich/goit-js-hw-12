{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// const baseUrl = \"https://pixabay.com/api\";\n// const endPoint = \"/api\";\n\nexport default async function searchImages(searchWord, page = 1, per_page = 40) {\n  const options = {\n    params: {\n      key: '48866244-bc210103fc5496976cb537971',\n      q: searchWord,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n\n//   const url = baseUrl + endPoint + `?key=${options.params.key}&q=${options.params.q}&image_type=${options.params.image_type}&orientation=${options.params.orientation}&safesearch=${options.params.safesearch}`;\n  const url = `https://pixabay.com/api/?key=${options.params.key}&q=${options.params.q}&image_type=${options.params.image_type}&orientation=${options.params.orientation}&safesearch=${options.params.safesearch}&page=${page}&per_page=${per_page}`;\n\n  return axios.get(url);\n}\n\n\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery' + \" a\", {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  const gallery = document.querySelector('.gallery');\n\nexport async function  imagesTemplate(arrPict) {\n\n    const markup = arrPict.map((image) =>\n      `<li class=\"gallery-item\">\n        <a class='gallery-link' href=\"${image.largeImageURL}\">\n          <img class=\"li-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          <div class=\"li-text\">\n            <table class=\"table\">\n              <tr><td>Likes</td><td>Views</td><td>Comment</td><td>Downloads</td></tr>\n              <tr><td>${image.likes}</td><td>${image.views}</td><td>${image.comments}</td><td>${image.downloads}</td></tr>\n            </table>\n          </div>\n        </a>\n      </li>`\n    ).join(\"\");\n  \n    gallery.insertAdjacentHTML(\"afterbegin\", markup);\n\n    lightbox.refresh();\n  }\n  \n\n\n\n\n","import searchImages from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-function';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst gallery = document.querySelector(\".gallery\");\nconst loadingMessage = document.querySelector(\"#loading-message\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\nconst endOfResultsMessage = document.querySelector(\"#end-message\");\n\nlet searchWord = \"\";\nlet page = 1;\nconst per_page = 40;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async function (e) {\n  e.preventDefault();\n\n  searchWord = input.value.trim();\n\n  if (!searchWord) {\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: 'rgba(255, 255, 255, 1)',\n      close: true,\n      position: \"topRight\",\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Input search string'\n    });\n    return;\n  }\n\n  gallery.innerHTML = ''; \n  page = 1; \n  loadMoreBtn.style.display = 'none'; \n\n  const response = await searchImages(searchWord, page, per_page);\n    loadingMessage.style.display = 'none';\n    try {\n  if (response.data.hits.length === 0) {\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: 'rgba(255, 255, 255, 1)',\n      close: true,\n      position: \"topRight\",\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Sorry, there are no images matching your search query. Please try again'\n    });\n    return;\n  }\n  imagesTemplate(response.data.hits);\n  totalHits = response.data.totalHits;\n  input.value='';\n\n  if (totalHits>per_page){\n   loadMoreBtn.style.display = 'block'\n}\n}catch (error) {\n    loadingMessage.style.display = 'none';\n    console.error(error);\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: 'rgba(255, 255, 255, 1)',\n      close: true,\n      position: 'topRight',\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Sorry, there was an error fetching images. Please try again.',\n    });\n  }\n});\n\nasync function loadMore() {\n  loadingMessage.style.display = 'block';\n  page += 1;\n\n  try {\n    const response = await searchImages(searchWord, page, per_page);\n    totalHits = response.data.totalHits;\n    console.log(`Total images available: ${totalHits}`);\n    console.log(`Images received: ${response.data.hits.length}`);\n\n    imagesTemplate(response.data.hits);\n\n    if ((page - 1) * per_page >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\nposition: 'topRight',\nmessage: 'We\\'re sorry, but you\\'ve reached the end of search results',\n      })\n    }\n\n    smoothScroll();\n  } catch (error) {\n    loadingMessage.style.display = 'none';\n    console.error(error);\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: 'rgba(255, 255, 255, 1)',\n      close: true,\n      position: 'topRight',\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Sorry, there was an error fetching images. Please try again.',\n    });\n  }\n}\n\nloadMoreBtn.addEventListener('click', loadMore);\n  \nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery img');\n  if (galleryItem) {\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}"],"names":["searchImages","searchWord","page","per_page","options","url","axios","lightbox","SimpleLightbox","gallery","imagesTemplate","arrPict","markup","image","form","input","loadingMessage","loadMoreBtn","totalHits","e","iziToast","response","error","loadMore","smoothScroll","galleryItem","cardHeight"],"mappings":"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"}